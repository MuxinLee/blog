
{{ define "main" }}
<section class="o-container">
  <div class="o-grid c-projects">
    {{ range where .Pages "Section" "projects" }}
      <a class="o-grid__item c-projects__item" href="{{ .RelPermalink }}">
        {{ $img := (.Resources.ByType "image").GetMatch "*featured*" }}
        {{ with $img }}
          {{ $mobile := .Resize "300x"}}
          {{ $mobileRetina := .Resize "600x" }}
          {{ $tablet := .Resize "360x"}}
          {{ $tabletRetina := .Resize "720x" }}
          {{ $desktop := .Resize "600x"}}
          {{ $desktopRetina := .Resize "1200x" }}
          <picture  itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
            <source media="(max-width: 46.25em)" srcset="{{ $mobile.RelPermalink }}, {{ $mobileRetina.RelPermalink }} 2x" />
            <source media="(max-width: 61.25em)" srcset="{{ $tablet.RelPermalink }}, {{ $tabletRetina.RelPermalink }} 2x" />
            <source srcset="{{ $desktop.RelPermalink }}, {{ $desktopRetina.RelPermalink }} 2x" />
            <img class="c-projects__image" src="{{ $desktop.RelPermalink }}" itemprop="contentUrl url" alt="{{ .Params.imageAltText }}" />
          </picture>
        {{ end }}
        <h2 class="c-projects__title">{{ .Title }}</h2>
      </a>
    {{ end }}
  </div>
</section>
{{ end }}
